<mujoco model="raycaster_test">
  <compiler angle="radian"/>
  
  <extension>
    <plugin plugin="mujoco.sensor.ray_caster"/>
  </extension>

  <visual>
    <headlight ambient="0.5 0.5 0.5"/>
  </visual>

  <worldbody>
    <light pos="0 0 3" dir="0 0 -1"/>
    <geom name="floor" type="plane" size="10 10 0.1" rgba="0.8 0.8 0.8 1"/>
    
    <!-- Some objects to detect -->
    <body name="box1" pos="2 0 0.5">
      <geom type="box" size="0.3 0.3 0.5" rgba="1 0 0 1"/>
    </body>
    
    <body name="box2" pos="0 2 0.5">
      <geom type="box" size="0.3 0.3 0.5" rgba="0 1 0 1"/>
    </body>
    
    <body name="box3" pos="-2 0 0.5">
      <geom type="box" size="0.3 0.3 0.5" rgba="0 0 1 1"/>
    </body>
    
    <body name="sphere1" pos="0 -2 0.5">
      <geom type="sphere" size="0.5" rgba="1 1 0 1"/>
    </body>
    
    <!-- Robot body with raycaster -->
    <body name="robot" pos="0 0 1">
      <freejoint/>
      <geom type="box" size="0.2 0.2 0.1" rgba="0.5 0.5 0.5 1"/>
      
      <!-- Camera for raycaster -->
      <camera name="depth_camera" pos="0 0 0" quat="1 0 0 0"/>
    </body>
  </worldbody>

  <sensor>
    <!-- RayCaster sensor -->
    <plugin name="raycaster_lidar" plugin="mujoco.sensor.ray_caster" objtype="camera" objname="depth_camera">
      <config key="resolution" value="0.1"/>
      <config key="size" value="1.57 0.785"/>
      <config key="dis_range" value="0.1 10"/>
      <config key="type" value="world"/>
      <config key="sensor_data_types" value="pos_w"/>
    </plugin>
    
    <!-- Position and orientation sensors for TF -->
    <framepos name="depth_camera_pos" objtype="camera" objname="depth_camera"/>
    <framequat name="depth_camera_quat" objtype="camera" objname="depth_camera"/>
  </sensor>
</mujoco>
