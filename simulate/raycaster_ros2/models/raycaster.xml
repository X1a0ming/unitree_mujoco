<mujoco model="ray_caster_test">
    <include file="scene.xml" />
    <include file="cylinder.xml" />
    <compiler autolimits="true" />
    <option timestep="0.002" />

    <extension>
        <plugin plugin="mujoco.sensor.ray_caster" />
        <plugin plugin="mujoco.sensor.ray_caster_camera" />
        <plugin plugin="mujoco.sensor.ray_caster_lidar" />
    </extension>
    <asset>

    </asset>

    <visual>
        <headlight ambient=".7 .7 .7" diffuse=".2 .2 .2" specular="0.1 0.1 0.1" />
        <map znear="0.01" />
        <scale contactwidth=".02" contactheight=".5" />
    </visual>

    <worldbody>

        <replicate count="3" offset=".5 0 0">
            <replicate count="3" offset="0 .5 0">
                <replicate count="2" offset="0 0 .5">
                    <body pos="2 -.07 1">
                        <freejoint />
                        <geom type="box" size=".1 .1 .1" rgba=".8 .2 .1 1" solimp="0.1 0.9 0.001 0.5 2"
                              solref="-10000 -10" mass="0.01"
                              solmix="1" condim="3" />
                    </body>
                </replicate>
            </replicate>
        </replicate>


        <body pos="0 0 2">
            <freejoint />
            <geom type="sphere" size=".1" rgba=".5 .5 .5 .3" />
            <camera name="RayCasterCamera" xyaxes="0 -1 0 0.5 0 1" />
        </body>
        <geom type="box" size=".1 .1 1.5" pos="0 0 0" rgba=".5 .5 .5 1" />

        <body pos="0 5 2">
            <freejoint />
            <geom type="sphere" size=".1" rgba=".5 .5 .5 .3" />
            <camera name="RayCaster" />
        </body>

        <body pos="0 -5 2">
            <freejoint />
            <geom type="sphere" size=".1" rgba=".5 .5 .5 .3" />
            <camera name="RayCasterLidar" xyaxes="0 -1 0 0 0 1" />
        </body>
        <geom type="box" size=".1 .1 0.5" pos="0 -5 0" rgba=".5 .5 .5 1" />

    </worldbody>

    <sensor>

        <plugin name="raycastercamera" plugin="mujoco.sensor.ray_caster_camera" objtype="camera"
                objname="RayCasterCamera">
            <config key="focal_length" value="11.41" />
            <config key="horizontal_aperture" value="20.995" />
            <config key="size" value="64 36" />
            <config key="dis_range" value="0.01 6" />
            <config key="vertical_aperture" value="12.64" />

            <config key="compute_time_log" value="1" />

            <config key="draw_deep_ray" value="1 5 1 1 0.2 0.5 1" />
            <!-- <config key="draw_deep_ray_ids" value="0 10 1 0 0 0.5 1 2 3 4 5 30" />
            <config key="draw_deep" value="2 5 0 1 0" /> -->
            <config key="draw_hip_point" value="1 0.02" />

            <config key="sensor_data_types" value="image inv_image pos_w pos_b" />
            <config key="noise_type" value="uniform" />
            <config key="noise_cfg" value="-0.1 0.1 1" />

        </plugin>

        <plugin name="raycaster" plugin="mujoco.sensor.ray_caster" objtype="camera"
                objname="RayCaster">
            <config key="type" value="yaw" />
            <config key="resolution" value="0.2" />
            <config key="size" value="1.0 2.0" />
            <config key="dis_range" value="0.01 6" />

            <config key="compute_time_log" value="1" />

            <config key="draw_deep_ray" value="1 5 0 1 1 0.5 1" />
            <config key="draw_deep_ray_ids" value="1 10 1 0 0 0.5 1 2 3 4 5 30" />
            <config key="draw_deep" value="1 5 0 1 0" />
            <config key="draw_hip_point" value="1 0.02" />

            <config key="sensor_data_types" value="inv_image_noise image_noise" />
            <config key="noise_type" value="uniform" />
            <config key="noise_cfg" value="-0.1 0.1 1" />

        </plugin>

        <plugin name="raycasterlidar" plugin="mujoco.sensor.ray_caster_lidar" objtype="camera"
                objname="RayCasterLidar">
            <config key="fov_h" value="150" />
            <config key="fov_v" value="50" />
            <config key="size" value="150 50" />
            <config key="dis_range" value="0.01 6" />

            <config key="n_step_update" value="10" />
            <config key="compute_time_log" value="1" />

            <config key="draw_deep_ray" value="2 1 0 1 1 0.5 1" />
            <config key="draw_hip_point" value="2 0.02" />

            <config key="sensor_data_types" value="inv_image_noise image_noise" />
            <config key="noise_type" value="uniform" />
            <config key="noise_cfg" value="-0.1 0.1 1" />

        </plugin>

    </sensor>

</mujoco>